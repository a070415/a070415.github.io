<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Caffeine Limit Calculator — Life Lab</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Caffeine Limit Calculator: enter daily intake, weight and age to estimate a conservative safe daily caffeine limit and see comparisons in cups of coffee or energy drinks. Not medical advice." />

  <!-- OPTIONAL: AdSense (replace CA-PUB with your ID if/when approved)
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXX"
          crossorigin="anonymous"></script>
  -->

  <style>
    :root{
      --bg: #0f1724;
      --card: rgba(255,255,255,0.04);
      --text: #e6eef8;
      --muted: #94a3b8;
      --accent: #7c3aed;
      --glass: rgba(255,255,255,0.03);
    }
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;color:var(--text);background:linear-gradient(180deg,#071029 0%, #0f1724 100%);}
    .wrap{max-width:880px;margin:36px auto;padding:26px}
    header{display:flex;flex-direction:column;gap:8px;align-items:center;text-align:center}
    h1{margin:0;font-size:22px}
    p.lead{margin:0;color:var(--muted);max-width:760px}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:20px;margin-top:20px}
    @media(max-width:980px){.grid{grid-template-columns:1fr}}

    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 8px 30px rgba(2,6,23,0.6)}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
    input[type=number], select{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);font-size:14px}
    .row{display:flex;gap:10px;align-items:center}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#2563eb);color:white;border:none;cursor:pointer;font-weight:600}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .result {font-size:20px;margin-top:12px}
    .small{font-size:13px;color:var(--muted)}
    .note{background:var(--glass);padding:10px;border-radius:10px;margin-top:12px;color:var(--muted);font-size:13px}

    .reference{font-size:13px;color:var(--muted);margin-top:12px}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    /* little table */
    table {width:100%;border-collapse:collapse;margin-top:10px;font-size:14px}
    th,td{padding:8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03);color:var(--muted)}
    th{color:var(--text);font-weight:600}
  </style>
</head>
<body>
  <main class="wrap">
    <header>
      <h1>Caffeine Limit Calculator</h1>
      <p class="lead">Enter your typical daily intake, body weight and age to see a conservative estimate of a daily caffeine limit and comparisons (cups of coffee, energy drinks). <strong>Not medical advice.</strong></p>
    </header>

    <section class="grid">
      <!-- Left: calculator -->
      <div>
        <div class="card">
          <h2 style="margin-top:0">Calculator</h2>

          <label for="inputIntake">Current daily caffeine intake (mg) — 현재 섭취량 (mg)</label>
          <input id="inputIntake" type="number" min="0" step="1" value="250" aria-label="Current daily caffeine intake in milligrams">

          <div style="display:flex;gap:12px;margin-top:12px">
            <div style="flex:1">
              <label for="inputWeight">Body weight (kg) — 체중 (kg)</label>
              <input id="inputWeight" type="number" min="10" step="0.1" value="70" aria-label="Body weight in kilograms">
            </div>
            <div style="width:120px">
              <label for="inputAge">Age — 나이</label>
              <input id="inputAge" type="number" min="1" step="1" value="30" aria-label="Age in years">
            </div>
          </div>

          <div style="margin-top:12px" class="row">
            <button id="calcBtn" class="btn">Estimate Limit</button>
            <button id="resetBtn" class="btn secondary">Reset</button>
          </div>

          <div class="result" id="resultBlock" aria-live="polite">
            <div class="small">Estimated conservative limit:</div>
            <div id="limitMg" style="font-size:28px;font-weight:700;margin-top:6px">— mg/day</div>
            <div id="limitNote" class="small" style="margin-top:6px">—</div>
          </div>

          <div class="note" id="disclaimer">
            <strong>Disclaimer</strong>: This tool provides a conservative, non-clinical estimate only. It is <em>not</em> medical advice. Individual sensitivity to caffeine varies. If you're pregnant, breastfeeding, have cardiovascular conditions, take medications, or are under 18, consult a healthcare professional.
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <h3 style="margin-top:0">How we estimate</h3>
          <p class="small">We show two references: (A) a general adult guideline commonly cited (up to 400 mg/day for most healthy adults), and (B) a conservative body-weight-based heuristic. The heuristic uses <strong>3 mg per kg of body weight</strong> for adults (a conservative safety factor). For people under 18 we use 2.5 mg/kg as a more cautious guideline. The displayed limit is the lower of guideline (A) and heuristic (B).</p>
        </div>

        <div class="card" style="margin-top:14px">
          <h3 style="margin-top:0">Examples / common caffeine amounts</h3>
          <table>
            <thead><tr><th>Item</th><th>Typical caffeine</th></tr></thead>
            <tbody>
              <tr><td>8 oz (240 ml) brewed coffee</td><td>~95 mg</td></tr>
              <tr><td>1 shot espresso (30 ml)</td><td>~63 mg</td></tr>
              <tr><td>8 oz energy drink</td><td>70–150 mg</td></tr>
              <tr><td>1 can cola (330 ml)</td><td>~35 mg</td></tr>
              <tr><td>1 cup black tea (240 ml)</td><td>~47 mg</td></tr>
            </tbody>
          </table>
          <p class="reference">Use these values to convert cups/drinks to mg when entering your daily intake.</p>
        </div>
      </div>

      <!-- Right: info & tips -->
      <aside>
        <div class="card">
          <h3 style="margin-top:0">Practical tips</h3>
          <ul class="small" style="padding-left:18px;margin:6px 0 0">
            <li>Track beverage types: specialty drinks often have much higher caffeine than brewed coffee.</li>
            <li>Avoid large doses late in the day; caffeine half-life typically 3–6 hours and disrupts sleep.</li>
            <li>If you have symptoms (palpitations, anxiety, sleep problems), lower your intake and consult a doctor.</li>
            <li>Pregnant or breastfeeding? Many guidelines recommend much lower limits — check with your provider.</li>
          </ul>
        </div>

        <div class="card" style="margin-top:12px">
          <h4 style="margin-top:0">Privacy</h4>
          <p class="small">No personal data is sent to servers by this tool. All calculations run in your browser. See <a href="/privacy.html" style="color:var(--text)">Privacy Policy</a> for details.</p>
        </div>

        <div class="card" style="margin-top:12px">
          <h4 style="margin-top:0">About this estimate</h4>
          <p class="small">This calculator uses conservative heuristics for educational purposes. It factors weight and age but cannot account for all health variables or drug interactions.</p>
        </div>
      </aside>
    </section>

    <footer>
      © 2025 Life Lab — Caffeine Limit Calculator
    </footer>
  </main>

  <script>
    // Elements
    const inputIntake = document.getElementById('inputIntake');
    const inputWeight = document.getElementById('inputWeight');
    const inputAge = document.getElementById('inputAge');
    const calcBtn = document.getElementById('calcBtn');
    const resetBtn = document.getElementById('resetBtn');
    const limitMgEl = document.getElementById('limitMg');
    const limitNoteEl = document.getElementById('limitNote');

    // Heuristic parameters
    const GENERAL_ADULT_LIMIT = 400; // mg/day - common guideline for healthy adults
    const MG_PER_KG_ADULT = 3.0;     // conservative heuristic (mg per kg body weight)
    const MG_PER_KG_YOUTH = 2.5;     // more cautious for under 18

    function formatMg(n){
      return `${Math.round(n)} mg/day`;
    }

    function computeLimit(intake, weightKg, ageYears){
      // Basic validation
      if (!weightKg || weightKg <= 0) return {limit: null, note: 'Please enter a valid body weight.'};

      // Heuristic by weight
      const perKg = (ageYears < 18) ? MG_PER_KG_YOUTH : MG_PER_KG_ADULT;
      const heuristic = weightKg * perKg;

      // Take the lower of heuristic and general adult guideline (if age >= 18)
      let limit = (ageYears >= 18) ? Math.min(GENERAL_ADULT_LIMIT, heuristic) : heuristic;

      // If age is below 13, recommend consulting pediatric guidance (do not rely on this tool)
      let note = '';
      if (ageYears < 13) {
        note = 'For children under 13, consult a pediatrician — this calculator provides a rough estimate only.';
      } else if (ageYears < 18) {
        note = 'For adolescents (13–17), this uses a cautious per-kg estimate; consult a healthcare professional for personalized advice.';
      } else {
        note = 'This is a conservative estimate — individual sensitivity varies.';
      }

      return { limit, note };
    }

    function updateUI(){
      // Use a single variable name for the current intake to avoid redeclaration errors
      const currentIntake = Number(inputIntake.value) || 0;
      const weight = Number(inputWeight.value) || 0;
      const age = Number(inputAge.value) || 0;

      const out = computeLimit(currentIntake, weight, age);
      if (!out.limit){
        limitMgEl.textContent = '— mg/day';
        limitNoteEl.textContent = out.note || '';
        return;
      }

      const limit = out.limit;
      limitMgEl.textContent = formatMg(limit);

      // Show comparison: how many cups of coffee (~95 mg)
      const cups = limit / 95;
      const cupText = (cups >= 1) ? `${cups.toFixed(1)} cups of brewed coffee (approx.)` : `${Math.round(limit)} mg`;

      // Also show current intake comparison
      let intakeCompare = '';
      if (currentIntake === 0) intakeCompare = 'You have not entered a current intake.';
      else if (currentIntake < limit) intakeCompare = `Your current intake (${currentIntake} mg) is below the conservative limit by ${Math.round(limit - currentIntake)} mg.`;
      else intakeCompare = `Your current intake (${currentIntake} mg) exceeds the conservative limit by ${Math.round(currentIntake - limit)} mg. Consider reducing intake or consulting a professional.`;

      limitNoteEl.innerHTML = `${out.note} &nbsp; <br><strong>Equivalent:</strong> ${cupText}. <br>${intakeCompare}`;
    }

    calcBtn.addEventListener('click', (e)=>{
      updateUI();
    });

    resetBtn.addEventListener('click', (e)=>{
      inputIntake.value = 0;
      inputWeight.value = 70;
      inputAge.value = 30;
      // update display to reflect reset values
      updateUI();
    });

    // Quick update when changing numbers
    [inputIntake, inputWeight, inputAge].forEach(el=>{
      el.addEventListener('input', ()=>{ /* don't auto-calc to respect user click - but you can enable if desired */ });
    });

    // initialize
    updateUI();
  </script>
</body>
</html>
